!function(){const e=document.querySelector(".js-theme-switcher-checkbox"),t=document.querySelector(".js-theme-switcher-label"),o=document.querySelector(".js-theme-switcher-icon"),s=document.documentElement,r=document.querySelector(".js-search-form"),n=document.querySelector(".js-search-input"),c=document.querySelector(".js-alert-message"),a=()=>{e.setAttribute("checked",""),t.textContent="light",o.setAttribute("href","/svg/sprite.svg#sun")},l=()=>{e.removeAttribute("checked"),t.textContent="dark",o.setAttribute("href","/svg/sprite.svg#moon")},i=()=>{s.classList.remove("is-light","is-dark"),localStorage.clear()},u=(e="Something went wrong")=>{c.textContent=e},d=async e=>{try{const t=await fetch(`https://api.github.com/users/${e}`),o=200,s=404,r=403;if(t.status===o&&t.ok){return await t.json()}if(t.status!==s||t.ok){if(t.status===r&&!t.ok){const e=await(async()=>{try{const e=await fetch("https://api.ipify.org/");return await e.text()}catch(e){u(),console.error(e)}})();u(`API rate limit exceeded for ${e} (403 Forbidden)`)}}else u("No results")}catch(e){u(),console.error(e)}},m=e=>e||"Not Available",h=(e,t,o)=>{const s=document.createElement("a");return s.href=e,s.textContent=t,s.classList.add(o),s.rel="nofollow me",s},f=(e,t,o,s="is-not-available")=>{e.classList.add(s),t.textContent=o},y=(e,t,o,s="is-not-available")=>{var r;e.classList.remove(s),(r=t).querySelector("a")&&r.removeChild(r.firstElementChild),t.appendChild(o)},v=(e,t,o,s="is-not-available")=>{e.classList.remove(s),t.textContent=o},g=async e=>{try{const{avatar_url:r,name:n,login:c,html_url:a,created_at:l,bio:i,public_repos:u,followers:d,following:g,location:b,blog:S,twitter_username:w,company:p}=await e;document.title=`${c} | devfinder`,(e=>{document.querySelector(".js-notification").textContent=`results updated to ${e}'s GitHub profile`})(c),((e,t)=>{const o=document.querySelector(".js-avatar");o.src=e,o.alt=t})(r,c),((e,t)=>{const o=document.querySelector(".js-name");"Not Available"===(e=m(e))?f(o,o,e=`${t}'s GitHub Profile`,"sr-only"):v(o,o,e,"sr-only")})(n,c),((e,t)=>{const o=document.querySelector(".js-user-github-link");o.href=t,o.textContent=`@${e}`})(c,a),(e=>{const t=document.querySelector(".js-time"),o=new Date(e).toUTCString().match(/\d{2} [A-Z][a-z]{2} \d{4}/)[0];t.setAttribute("datetime",e),t.textContent=o})(l),(e=>{const t=document.querySelector(".js-bio");"Not Available"===(e=m(e))?f(t,t,"This profile has no bio"):v(t,t,e)})(i),s=u,document.querySelector(".js-repository").textContent=s,o=d,document.querySelector(".js-followers").textContent=o,t=g,document.querySelector(".js-following").textContent=t,(e=>{const t=document.querySelector(".js-location"),o=t.querySelector(".js-value");"Not Available"===(e=m(e))?f(t,o,e):v(t,o,e)})(b),(e=>{const t=document.querySelector(".js-website"),o=t.querySelector(".js-value");o.textContent="";const s=(e=m(e)).match(/\s/),r=e.match(/^https?:\/\//);if("Not Available"===e)f(t,o,e);else if(s)v(t,o,e);else if(r){const s=h(e,e,"result__link");y(t,o,s)}else{const s=h(`http://${e}`,e,"result__link");y(t,o,s)}})(S),(e=>{const t=document.querySelector(".js-twitter"),o=t.querySelector(".js-value");if(o.textContent="","Not Available"===(e=m(e)))f(t,o,e);else{const s=h(`https://twitter.com/${e}`,`@${e}`,"result__link");y(t,o,s)}})(w),(e=>{const t=document.querySelector(".js-office"),o=t.querySelector(".js-value");o.textContent="";const s=(e=m(e)).match(/@/);if("Not Available"===e)f(t,o,e);else if(s){e=e.substring(1);const s=h(`https://github.com/${e}`,`@${e}`,"result__link");y(t,o,s)}else v(t,o,e)})(p)}catch(e){console.error(e)}var t,o,s},b=e=>{if("string"==typeof e){const t=/^[a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38}$/i;return e.match(t)}return!1};e.addEventListener("change",(()=>{matchMedia("(prefers-color-scheme: dark)").matches?(s.classList.toggle("is-light"),s.classList.contains("is-light")?(l(),localStorage.setItem("color-mode","is-light")):(a(),i())):(s.classList.toggle("is-dark"),s.classList.contains("is-dark")?(a(),localStorage.setItem("color-mode","is-dark")):(l(),i()))})),document.addEventListener("DOMContentLoaded",(()=>{const e=matchMedia("(prefers-color-scheme: dark)").matches,t=s.classList[0];t?"is-dark"===t?a():l():e?a():l()})),document.addEventListener("DOMContentLoaded",(async()=>{try{let e=new URLSearchParams(document.location.search).get("user");if(e){e=e.trim();const t=b(e);if(n.value=e,t){const t=await d(e);g(t)}else u("Invalid username")}}catch(e){console.error(e)}})),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(({matches:e})=>{var t;t=e,i(),t?a():l()})),r.addEventListener("submit",(async e=>{try{e.preventDefault(),c.textContent="";const t=n.value.trim();if(b(t)){(e=>{const t=new URL(document.location);t.searchParams.set("user",e),window.history.pushState({},"",t)})(t);const e=await d(t);g(e)}else u("Invalid username")}catch(e){console.error(e)}}))}();
